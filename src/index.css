@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply bg-surface-primary text-dark-50 antialiased;
  }

  html.light-theme body {
    @apply bg-slate-50 text-slate-900;
  }

  ::-webkit-scrollbar {
    width: 0px;
    height: 0px;
  }

  input, textarea, select {
    @apply outline-none;
  }

  input::placeholder, textarea::placeholder {
    @apply text-dark-200;
  }

  html.light-theme input::placeholder,
  html.light-theme textarea::placeholder {
    @apply text-slate-400;
  }
}

@layer components {
  .glass {
    @apply bg-surface-secondary/95 backdrop-blur-xl border-b border-surface-border;
  }

  html.light-theme .glass {
    @apply bg-white/95 border-slate-200;
  }

  .btn-primary {
    @apply bg-ig-blue text-white font-semibold rounded-ig px-4 py-2
           hover:bg-ig-blueHover active:opacity-70
           transition-all duration-150 disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply bg-surface-elevated text-dark-50 font-semibold rounded-ig px-4 py-2
           hover:bg-dark-500 active:opacity-70
           transition-all duration-150;
  }

  html.light-theme .btn-secondary {
    @apply bg-slate-100 text-slate-900 hover:bg-slate-200;
  }

  .btn-ghost {
    @apply bg-transparent text-dark-50 font-medium rounded-ig px-4 py-2
           hover:bg-surface-elevated active:opacity-70
           transition-all duration-150;
  }

  html.light-theme .btn-ghost {
    @apply text-slate-900 hover:bg-slate-100;
  }

  .btn-outline {
    @apply bg-transparent border border-surface-borderLight text-dark-50 font-semibold rounded-ig px-4 py-2
           hover:bg-surface-tertiary active:opacity-70
           transition-all duration-150;
  }

  html.light-theme .btn-outline {
    @apply border-slate-300 text-slate-900 hover:bg-slate-50;
  }

  .btn-gold {
    @apply bg-ig-blue text-white font-semibold rounded-ig
           hover:bg-ig-blueHover active:opacity-80
           transition-all duration-150 disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .input-dark {
    @apply w-full bg-surface-secondary border border-surface-border rounded-ig px-4 py-3 text-dark-50
           placeholder:text-dark-200 focus:border-dark-400
           transition-all duration-200;
  }

  html.light-theme .input-dark {
    @apply bg-slate-50 border-slate-200 text-slate-900 placeholder:text-slate-400
           focus:border-slate-400;
  }

  .input-enhanced {
    @apply w-full bg-surface-tertiary border border-surface-border rounded-ig-md px-4 py-3 text-dark-50
           placeholder:text-dark-300 transition-all duration-200;
  }

  .input-enhanced:focus {
    @apply border-dark-400 bg-surface-secondary;
  }

  html.light-theme .input-enhanced {
    @apply bg-slate-100 border-slate-200 text-slate-900 placeholder:text-slate-400;
  }

  html.light-theme .input-enhanced:focus {
    @apply border-slate-300 bg-white;
  }

  .card {
    @apply bg-surface-secondary border border-surface-border rounded-ig-md;
  }

  html.light-theme .card {
    @apply bg-white border-slate-200;
  }

  .card-hover {
    @apply card hover:bg-surface-tertiary cursor-pointer
           transition-all duration-150 active:scale-[0.99];
  }

  html.light-theme .card-hover {
    @apply hover:bg-slate-50;
  }

  .card-flat {
    @apply bg-transparent border-b border-surface-border;
  }

  html.light-theme .card-flat {
    @apply border-slate-100;
  }

  .divider {
    @apply h-px bg-surface-border;
  }

  html.light-theme .divider {
    @apply bg-slate-200;
  }

  .divider-thin {
    @apply h-px bg-surface-border/50;
  }

  .chip {
    @apply inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium
           transition-all duration-150;
  }

  .chip-active {
    @apply chip bg-dark-50 text-surface-primary;
  }

  html.light-theme .chip-active {
    @apply bg-slate-900 text-white;
  }

  .chip-inactive {
    @apply chip bg-transparent text-dark-100 border border-surface-borderLight
           hover:border-dark-300;
  }

  html.light-theme .chip-inactive {
    @apply text-slate-600 border-slate-300 hover:border-slate-400;
  }

  .category-chip-active {
    @apply px-4 py-2 rounded-full text-sm font-semibold
           bg-dark-50 text-surface-primary transition-all duration-150;
  }

  html.light-theme .category-chip-active {
    @apply bg-slate-900 text-white;
  }

  .category-chip-inactive {
    @apply px-4 py-2 rounded-full text-sm font-medium
           bg-transparent text-dark-100 border border-surface-borderLight
           hover:border-dark-400 transition-all duration-150;
  }

  html.light-theme .category-chip-inactive {
    @apply text-slate-600 border-slate-300 hover:border-slate-400;
  }

  .tab-item {
    @apply px-4 py-2 text-sm font-medium transition-all duration-150;
  }

  .tab-item-active {
    @apply tab-item text-dark-50 border-b-2 border-dark-50;
  }

  html.light-theme .tab-item-active {
    @apply text-slate-900 border-slate-900;
  }

  .tab-item-inactive {
    @apply tab-item text-dark-200 hover:text-dark-100;
  }

  html.light-theme .tab-item-inactive {
    @apply text-slate-400 hover:text-slate-600;
  }

  .list-item {
    @apply flex items-center gap-3 p-3 rounded-ig
           hover:bg-surface-tertiary active:bg-surface-elevated
           transition-all duration-100 cursor-pointer;
  }

  html.light-theme .list-item {
    @apply hover:bg-slate-50 active:bg-slate-100;
  }

  .menu-item {
    @apply flex items-center gap-3 px-4 py-3
           hover:bg-surface-tertiary active:bg-surface-elevated
           transition-all duration-100;
  }

  html.light-theme .menu-item {
    @apply hover:bg-slate-50 active:bg-slate-100;
  }

  .icon-btn {
    @apply w-10 h-10 rounded-full flex items-center justify-center
           text-dark-50 hover:bg-surface-tertiary active:opacity-60
           transition-all duration-100;
  }

  html.light-theme .icon-btn {
    @apply text-slate-800 hover:bg-slate-100;
  }

  .icon-btn-ghost {
    @apply w-10 h-10 rounded-full flex items-center justify-center
           text-dark-100 hover:text-dark-50
           transition-all duration-100;
  }

  html.light-theme .icon-btn-ghost {
    @apply text-slate-500 hover:text-slate-800;
  }

  .skeleton {
    @apply animate-pulse bg-surface-elevated rounded-ig;
  }

  html.light-theme .skeleton {
    @apply bg-slate-200;
  }

  .badge {
    @apply inline-flex items-center justify-center min-w-[18px] h-[18px] px-1.5
           text-[10px] font-bold rounded-full;
  }

  .badge-red {
    @apply badge bg-ig-red text-white;
  }

  .badge-blue {
    @apply badge bg-ig-blue text-white;
  }

  .avatar {
    @apply rounded-full bg-surface-elevated flex items-center justify-center overflow-hidden;
  }

  .avatar-ring {
    @apply ring-2 ring-surface-border;
  }

  .avatar-story {
    background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
    @apply p-[2px] rounded-full;
  }

  .avatar-story-seen {
    @apply p-[2px] rounded-full bg-surface-border;
  }

  .modal-overlay {
    @apply fixed inset-0 bg-black/60 backdrop-blur-sm z-50;
  }

  .modal-content {
    @apply bg-surface-secondary rounded-ig-lg border border-surface-border;
  }

  html.light-theme .modal-content {
    @apply bg-white border-slate-200;
  }

  .toast {
    @apply px-4 py-3 rounded-ig bg-surface-elevated text-dark-50 border border-surface-border;
  }

  html.light-theme .toast {
    @apply bg-slate-900 text-white border-transparent;
  }

  .safe-top {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
}

@layer utilities {
  .text-gold-gradient {
    @apply bg-gradient-to-r from-gold-400 to-gold-600 bg-clip-text text-transparent;
  }

  .glow-gold {
    filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.3));
  }
}

.story-ring {
  background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
  background-size: 200% 200%;
  animation: storyRing 3s ease infinite;
  padding: 3px;
  border-radius: 50%;
}

.story-ring-seen {
  @apply bg-surface-border;
  padding: 2px;
  border-radius: 50%;
}

html.light-theme .story-ring-seen {
  @apply bg-slate-300;
}

@keyframes storyRing {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.typing-indicator span {
  animation: typing 1.4s infinite ease-in-out;
}

.typing-indicator span:nth-child(1) { animation-delay: 0s; }
.typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

@keyframes typing {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-4px); opacity: 1; }
}

.message-bubble-sent {
  @apply bg-ig-blue text-white;
  border-radius: 22px 22px 4px 22px;
}

.message-bubble-received {
  @apply bg-surface-elevated text-dark-50;
  border-radius: 22px 22px 22px 4px;
}

html.light-theme .message-bubble-received {
  @apply bg-slate-100 text-slate-900;
}

input[type="date"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator {
  filter: invert(1) brightness(0.7);
}

html.light-theme input[type="date"]::-webkit-calendar-picker-indicator,
html.light-theme input[type="time"]::-webkit-calendar-picker-indicator {
  filter: none;
}

select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23737373'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
  background-position: right 12px center;
  background-repeat: no-repeat;
  background-size: 16px;
  -webkit-appearance: none;
  appearance: none;
}

.logo-glow {
  filter: drop-shadow(0 0 10px rgba(0, 149, 246, 0.4));
}

.password-input-wrapper {
  position: relative;
}

.password-input-wrapper .input-enhanced {
  padding-right: 48px;
}

.password-toggle-btn {
  @apply absolute right-3 top-1/2 -translate-y-1/2 w-8 h-8
         flex items-center justify-center rounded-ig
         text-dark-200 hover:text-dark-50
         transition-all duration-150;
}

html.light-theme .password-toggle-btn {
  @apply text-slate-400 hover:text-slate-600;
}

.btn-gold-enhanced {
  @apply bg-ig-blue text-white font-semibold rounded-ig
         hover:bg-ig-blueHover active:opacity-80
         transition-all duration-150 disabled:opacity-40 disabled:cursor-not-allowed;
}

.btn-social {
  @apply w-full py-3.5 rounded-ig font-semibold flex items-center justify-center gap-3
         transition-all duration-150;
}

.btn-google {
  @apply btn-social bg-surface-elevated text-dark-50 border border-surface-border
         hover:bg-surface-tertiary;
}

.btn-apple {
  @apply btn-social bg-white text-black
         hover:bg-slate-100;
}

html.light-theme .btn-google {
  @apply bg-white text-slate-900 border-slate-200 hover:bg-slate-50;
}

.validation-message {
  @apply text-xs mt-1.5 flex items-center gap-1 animate-fade-in;
}

.validation-error {
  @apply validation-message text-ig-red;
}

.validation-success {
  @apply validation-message text-ig-green;
}

.password-strength {
  @apply flex gap-1 mt-2;
}

.password-strength-bar {
  @apply flex-1 h-1 rounded-full bg-surface-elevated transition-all duration-300;
}

.password-strength-bar.weak {
  @apply bg-ig-red;
}

.password-strength-bar.medium {
  @apply bg-yellow-500;
}

.password-strength-bar.strong {
  @apply bg-ig-green;
}

.loading-overlay {
  @apply absolute inset-0 bg-surface-primary/90 backdrop-blur-sm flex items-center justify-center
         rounded-ig-md z-10;
}

.plan-card-enhanced {
  @apply relative overflow-hidden rounded-ig-md bg-surface-secondary border border-surface-border;
}

html.light-theme .plan-card-enhanced {
  @apply bg-white border-slate-200;
}

.plan-card-enhanced .cover-image {
  @apply w-full aspect-video object-cover;
}

.plan-card-enhanced .cover-gradient {
  @apply absolute inset-0 bg-gradient-to-t from-surface-primary via-surface-primary/50 to-transparent;
}

html.light-theme .plan-card-enhanced .cover-gradient {
  @apply from-black/70 via-black/30 to-transparent;
}

.plan-card-enhanced .category-badge {
  @apply absolute top-3 left-3 px-2.5 py-1 rounded-ig text-xs font-semibold
         bg-surface-primary/80 backdrop-blur-sm text-dark-50;
}

html.light-theme .plan-card-enhanced .category-badge {
  @apply bg-white/90 text-slate-800;
}

.plan-card-enhanced .bookmark-btn {
  @apply absolute top-3 right-3 w-8 h-8 rounded-full
         bg-surface-primary/50 backdrop-blur-sm flex items-center justify-center
         text-dark-50 hover:text-ig-blue transition-colors;
}

.avatar-stack {
  @apply flex -space-x-2;
}

.avatar-stack-item {
  @apply w-7 h-7 rounded-full border-2 border-surface-primary flex items-center justify-center
         text-xs bg-surface-elevated;
}

html.light-theme .avatar-stack-item {
  @apply border-white bg-slate-100;
}

.avatar-stack-more {
  @apply w-7 h-7 rounded-full border-2 border-surface-primary flex items-center justify-center
         text-[10px] font-semibold bg-ig-blue/20 text-ig-blue;
}

html.light-theme .avatar-stack-more {
  @apply border-white;
}

.toggle-track {
  @apply relative w-11 h-6 rounded-full bg-surface-border transition-colors duration-200;
}

.toggle-track.active {
  @apply bg-ig-blue;
}

html.light-theme .toggle-track {
  @apply bg-slate-300;
}

.toggle-thumb {
  @apply absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white shadow-ig
         transition-transform duration-200;
}

.toggle-thumb.active {
  @apply translate-x-5;
}

.empty-state {
  @apply text-center py-12 px-6;
}

.empty-state-icon {
  @apply w-20 h-20 mx-auto mb-4 rounded-full bg-surface-elevated flex items-center justify-center;
}

html.light-theme .empty-state-icon {
  @apply bg-slate-100;
}

.empty-state-title {
  @apply text-lg font-semibold text-dark-50 mb-1;
}

html.light-theme .empty-state-title {
  @apply text-slate-900;
}

.empty-state-desc {
  @apply text-dark-200 text-sm max-w-xs mx-auto;
}

html.light-theme .empty-state-desc {
  @apply text-slate-500;
}

.section-header {
  @apply flex items-center justify-between mb-4;
}

.section-header-label {
  @apply text-sm font-semibold text-dark-50;
}

html.light-theme .section-header-label {
  @apply text-slate-900;
}

.profile-stat {
  @apply text-center;
}

.profile-stat-value {
  @apply text-lg font-bold text-dark-50;
}

html.light-theme .profile-stat-value {
  @apply text-slate-900;
}

.profile-stat-label {
  @apply text-xs text-dark-200;
}

html.light-theme .profile-stat-label {
  @apply text-slate-500;
}

.follow-btn {
  @apply px-6 py-1.5 rounded-ig text-sm font-semibold
         bg-ig-blue text-white hover:bg-ig-blueHover
         transition-all duration-150;
}

.follow-btn-outline {
  @apply px-6 py-1.5 rounded-ig text-sm font-semibold
         bg-transparent border border-surface-borderLight text-dark-50
         hover:bg-surface-tertiary transition-all duration-150;
}

html.light-theme .follow-btn-outline {
  @apply border-slate-300 text-slate-900 hover:bg-slate-50;
}

.suggestion-card {
  @apply bg-surface-secondary border border-surface-border rounded-ig-md p-4
         flex flex-col items-center text-center min-w-[150px];
}

html.light-theme .suggestion-card {
  @apply bg-white border-slate-200;
}

.bottom-tab {
  @apply flex flex-col items-center justify-center py-2 px-3 min-w-[60px]
         transition-all duration-100;
}

.bottom-tab-icon {
  @apply w-6 h-6 transition-all duration-100;
}

.bottom-tab-label {
  @apply text-[10px] mt-1 font-medium;
}

.bottom-tab-active .bottom-tab-icon {
  @apply text-dark-50;
}

.bottom-tab-active .bottom-tab-label {
  @apply text-dark-50;
}

.bottom-tab-inactive .bottom-tab-icon {
  @apply text-dark-300;
}

.bottom-tab-inactive .bottom-tab-label {
  @apply text-dark-300;
}

html.light-theme .bottom-tab-active .bottom-tab-icon {
  @apply text-slate-900;
}

html.light-theme .bottom-tab-active .bottom-tab-label {
  @apply text-slate-900;
}

html.light-theme .bottom-tab-inactive .bottom-tab-icon {
  @apply text-slate-400;
}

html.light-theme .bottom-tab-inactive .bottom-tab-label {
  @apply text-slate-400;
}

.create-btn {
  @apply w-12 h-12 rounded-ig-md bg-surface-elevated border border-surface-borderLight
         flex items-center justify-center text-dark-50
         hover:bg-surface-tertiary active:scale-95
         transition-all duration-150;
}

html.light-theme .create-btn {
  @apply bg-slate-100 border-slate-300 text-slate-900 hover:bg-slate-200;
}
